<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
  <div>
    <table class="table">
      
        <thead>
          <th>Iphone</th>
          <th>Mac</th>
          <th>Ipad</th>
          <th>Ipod</th>
        </thead>
      <tbody id = "tbody1"></tbody>
    </table>
  </div>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-app.js";
    import { getDatabase,set,get,child,ref,onValue,DataSnapshot } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBWwyFQr7XO6LLXDd-D7KOwN7y_nLaEH3Y",
      authDomain: "mojcenik.firebaseapp.com",
      databaseURL: "https://mojcenik-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "mojcenik",
      storageBucket: "mojcenik.appspot.com",
      messagingSenderId: "63719063115",
      appId: "1:63719063115:web:45987837a7a2bab3ef57ce"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();

    function writeData(PriceTag, Phone, PC, Tablet, Mp3) {
    const reference = ref(db, 'Product/' + PriceTag);
    set(reference, {
      Iphone: Phone,
      Mac: PC,
      Ipod: Tablet,
      Ipad: Mp3
    });
  }
writeData("Price", "950$", "2000$", "800$", "600$" )



  /////CONSOLE CHECK

// const dbRef = ref(db, 'Product/' +PriceTag +'/Price/');
// onValue(dbRef, (snapshot) =>{
//   const data = snapshot.val();
// });






var tbody = document.getElementById('tbody1');

function AddItemToTable(PriceTag, Phone, PC, Tablet, Mp3){
  let trow = document.createElement('tr')
  let td1 = document.createElement('td');
  let td2 = document.createElement('td');
  let td3 = document.createElement('td');
  let td4 = document.createElement('td');
  let td5 = document.createElement('td');

  td1.innerHTML = PriceTag;
  td2.innerHTML = Phone;
  td3.innerHTML = PC;
  td4.innerHTML = Tablet;
  td5.innerHTML = Mp3;

  trow.appendChild(td1);
  trow.appendChild(td2);
  trow.appendChild(td3);
  trow.appendChild(td4);
  trow.appendChild(td5);

  tbody.appendChild(trow);

}

function addAllItemsToTable(Price){
  tbody.innerHTML="";
  Price.forEach(Element => {
    AddItemToTable(Element, Price);
  });
}
// async function GetAllDataOnce(){
//   const querySnapshot = await getDocs(collection)
// }
function GetAllDataOnce(){
  const dbRef = ref(db);
  get(child(dbRef, "Product" + "/Price"))
  .then((snapshot)=>{
    var Product = [];
    snapshot.forEach(childSnapshot =>{
      Product.push(childSnapshot.val());
    });
    addAllItemsToTable(Product);
  })

}
window.onload = GetAllDataOnce;
</script>

  
</body>
</html>